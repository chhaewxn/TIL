# ğŸ“ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ì œì‘(2) 
## ë„ë©”ì¸ ëª¨ë¸ê³¼ í…Œì´ë¸” ì„¤ê³„
### ìš”êµ¬ì‚¬í•­ ë¶„ì„
(1) íšŒì› ê¸°ëŠ¥
- íšŒì› ë“±ë¡
- íšŒì› ì¡°íšŒ

(2) ìƒí’ˆ ê¸°ëŠ¥
- ìƒí’ˆ ë“±ë¡
- ìƒí’ˆ ìˆ˜ì •
- ìƒí’ˆ ì¡°íšŒ

(3) ì£¼ë¬¸ ê¸°ëŠ¥
- ìƒí’ˆ ì£¼ë¬¸
- ì£¼ë¬¸ ë‚´ì—­ ì¡°íšŒ
- ì£¼ë¬¸ ì·¨ì†Œ

(4) ê¸°íƒ€ ìš”êµ¬ì‚¬í•­
- ìƒí’ˆì˜ ì¢…ë¥˜ëŠ” ë„ì„œ, ìŒë°˜, ì˜í™”ê°€ ìˆë‹¤.
- ìƒí’ˆì„ ì¹´í…Œê³ ë¦¬ë¡œ êµ¬ë¶„í•  ìˆ˜ ìˆë‹¤.
- ìƒí’ˆ ì£¼ë¬¸ ì‹œ ë°°ì†¡ ì •ë³´ë¥¼ ì…ë ¥í•  ìˆ˜ ìˆë‹¤.

### ë„ë©”ì¸ ëª¨ë¸ ì„¤ê³„
#### ìš”êµ¬ì‚¬í•­ì„ ë¶„ì„í•´ì„œ ì„¤ê³„í•œ ë„ë©”ì¸ ëª¨ë¸

![](https://velog.velcdn.com/images/chhaewxn/post/fd81af70-5470-4d89-8aea-7b1b7afa74b4/image.png)

ğŸ”» íšŒì›, ì£¼ë¬¸, ìƒí’ˆì˜ ê´€ê³„
- íšŒì›ì€ ì—¬ëŸ¬ ìƒí’ˆì„ ì£¼ë¬¸í•  ìˆ˜ ìˆìŒ
- í•œ ë²ˆ ì£¼ë¬¸í•  ë•Œ ì—¬ëŸ¬ ìƒí’ˆì„ ì„ íƒí•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì£¼ë¬¸ê³¼ ìƒí’ˆì€ ë‹¤ëŒ€ë‹¤ ê´€ê³„
- ë‹¤ëŒ€ë‹¤ ê´€ê³„ëŠ” ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ëŠ” ë¬¼ë¡ ì´ê³  ì—”í‹°í‹°ì—ì„œë„ ê±°ì˜ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì£¼ë¬¸ìƒí’ˆì´ë¼ëŠ” ì—”í‹°í‹°ë¥¼ ì¶”ê°€í•´ì„œ ë‹¤ëŒ€ë‹¤ ê´€ê³„ë¥¼ ì¼ëŒ€ë‹¤, ë‹¤ëŒ€ì¼ ê´€ê³„ë¡œ í’€ì–´ëƒ„

ğŸ”» ìƒí’ˆ ë¶„ë¥˜ 
- ìƒí’ˆì€ ë„ì„œ, ìŒë°˜, ì˜í™”ë¡œ êµ¬ë¶„ë˜ëŠ”ë° ìƒí’ˆì´ë¼ëŠ” ê³µí†µ ì†ì„±ì„ ì‚¬ìš©í•˜ë¯€ë¡œ ìƒì† êµ¬ì¡°ë¡œ í‘œí˜„


### ì—”í‹°í‹° ë¶„ì„
![](https://velog.velcdn.com/images/chhaewxn/post/54fcc052-0d43-403f-9fb3-c8f0d0d453c3/image.png)

- íšŒì› (Member): ì´ë¦„(name)ê³¼ ì£¼ë¬¸í•œ ìƒí’ˆë“¤(orders) ê·¸ë¦¬ê³  ì„ë² ë””ë“œ íƒ€ì…ì¸ ì£¼ì†Œ(Address)ë¥¼ ê°€ì§
- ì£¼ë¬¸ (Order)
	- í•œ ë²ˆ ì£¼ë¬¸ ì‹œ ì—¬ëŸ¬ ìƒí’ˆì„ ì£¼ë¬¸í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì£¼ë¬¸ê³¼ ì£¼ë¬¸ìƒí’ˆì€ ì¼ëŒ€ë‹¤ ê´€ê³„
	- ì£¼ë¬¸ì€ ìƒí’ˆì„ ì£¼ë¬¸í•œ íšŒì›(member)ê³¼ ë°°ì†¡ ì •ë³´(delivery), ì£¼ë¬¸ ë‚ ì§œ(orderDate), ì£¼ë¬¸ ìƒíƒœ(status)ë¥¼ ê°€ì§€ê³  ìˆìŒ
	- ì£¼ë¬¸ ìƒíƒœëŠ” ì—´ê±°í˜•ì„ ì‚¬ìš©í•´ ì£¼ë¬¸, ì·¨ì†Œë¥¼ í‘œí˜„í•  ìˆ˜ ìˆìŒ
- ì£¼ë¬¸ìƒí’ˆ (OrderItem): ì£¼ë¬¸í•œ ìƒí’ˆ ì •ë³´ê°€ ì£¼ë¬¸ ê¸ˆì•¡(orderPrice), ì£¼ë¬¸ ìˆ˜ëŸ‰(count) ì •ë³´ë¥¼ ê°€ì§€ê³  ìˆìŒ
- ìƒí’ˆ (Item)
	- ì´ë¦„(name), ê°€ê²©(price), ì¬ê³ ìˆ˜ëŸ‰(stockQuantity)ì„ ê°€ì§€ê³  ìˆìŒ
	- ìƒí’ˆì„ ì£¼ë¬¸í•˜ê³  ì¬ê³ ìˆ˜ëŸ‰ì´ ì¤„ì–´ë“¤ê³ , ìƒí’ˆì˜ ì¢…ë¥˜ë¡œëŠ” ë„ì„œ, ìŒë°˜, ì˜í™”ê°€ ìˆìœ¼ë©° ê°ê°ì€ ì‚¬ìš©í•˜ëŠ” ì†ì„±ì´ ì¡°ê¸ˆì”© ë‹¤ë¦„
- ë°°ì†¡ (Delivery)
	- ì£¼ë¬¸ ì‹œ í•˜ë‚˜ì˜ ë°°ì†¡ ì •ë³´ë¥¼ ìƒì„±í•¨
	- ì£¼ë¬¸ê³¼ ë°°ì†¡ì€ ì¼ëŒ€ì¼ ê´€ê³„
- ì¹´í…Œê³ ë¦¬ (Category)
	- ìƒí’ˆê³¼ ë‹¤ëŒ€ë‹¤ ê´€ê³„ë¥¼ ë§ºìŒ
- ì£¼ì†Œ (Address)
	- ê°’ íƒ€ì…(ì„ë² ë””ë“œ íƒ€ì…)ì´ë©° íšŒì›ê³¼ ë°°ì†¡ì—ì„œ ì‚¬ìš©

### í…Œì´ë¸” ì„¤ê³„
ğŸ”» ê°ì²´ ë„ë©”ì¸ ëª¨ë¸ì„ ë§¤í•‘í•˜ê¸° ìœ„í•´ ì„¤ê³„í•œ í…Œì´ë¸”
![](https://velog.velcdn.com/images/chhaewxn/post/30e32b0c-9110-4d18-be58-344dae80a418/image.png)

MEMBER
- íšŒì› ì—”í‹°í‹°ì˜ Address ì„ë² ë””ë“œ íƒ€ì… ì •ë³´ê°€ íšŒì› í…Œì´ë¸”ì— ê·¸ëŒ€ë¡œ ë“¤ì–´ê°€ë©°
DELIVERY í…Œì´ë¸”ë„ ë§ˆì°¬ê°€ì§€

ITEM
- ì•¨ë²”, ë„ì„œ, ì˜í™” íƒ€ì…ì„ í†µí•©í•´ì„œ í•˜ë‚˜ì˜ í…Œì´ë¸”ë¡œ ë§Œë“¤ì—ˆìœ¼ë©° DTYPE ì»¬ëŸ¼ìœ¼ë¡œ íƒ€ì…ì„ êµ¬ë¶„


#### ì—°ê´€ê´€ê³„ ì •ë¦¬

íšŒì›ê³¼ ì£¼ë¬¸
- ì¼ëŒ€ë‹¤ ì–‘ë°©í–¥ ê´€ê³„ì´ë¯€ë¡œ ì™¸ë˜ í‚¤ê°€ ìˆëŠ” ì£¼ë¬¸ì´ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸
- ê·¸ëŸ¬ë¯€ë¡œ Order.memberë¥¼ ORDERS.MEMBER_ID ì™¸ë˜ í‚¤ì™€ ë§¤í•‘

ì£¼ë¬¸ìƒí’ˆê³¼ ì£¼ë¬¸
- ë‹¤ëŒ€ì¼ ì–‘ë°©í–¥ ê´€ê³„ì´ë¯€ë¡œ ì£¼ë¬¸ìƒí’ˆì´ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸
- ê·¸ëŸ¬ë¯€ë¡œ OrderItem.orderë¥¼ ORDER_ITEM.ORDER_ID ì™¸ë˜ í‚¤ì™€ ë§¤í•‘

ì£¼ë¬¸ìƒí’ˆê³¼ ìƒí’ˆ
- ë‹¤ëŒ€ì¼ ë‹¨ë°©í–¥ ê´€ê³„ì´ë¯€ë¡œ OrderItem.itemì„ ORDER_ITEM.ITEM_ID ì™¸ë˜ í‚¤ì™€ ë§¤í•‘

ì£¼ë¬¸ê³¼ ë°°ì†¡
- ì¼ëŒ€ì¼ ì–‘ë°©í–¥ ê´€ê³„ì´ë¯€ë¡œ Order.deliveryë¥¼ ORDERS.DELIVERY_ID ì™¸ë˜ í‚¤ì™€ ë§¤í•‘

ì¹´í…Œê³ ë¦¬ì™€ ìƒí’ˆ
- @ManyToManyë¥¼ ì‚¬ìš©í•´ì„œ ë§¤í•‘

### ì—”í‹°í‹° í´ë˜ìŠ¤
- íšŒì› ì—”í‹°í‹°
```java
@Entity
public class Member {

    @Id @GeneratedValue
    @Column(name = "MEMBER_ID")
    private Long id;

    private String name;

    @Embedded
    private Address address;

    @OneToMany(mappedBy = "member")
    private List<Order> orders = new ArrayList<Order>();
   
    // Getter, Setter
    ...
}
```

- ì£¼ë¬¸ ì—”í‹°í‹°
```java
@Entity
@Table(name = "ORDERS")
public class Order {

    @Id @GeneratedValue
    @Column(name = "ORDER_ID")
    private Long id;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "MEMBER_ID")
    private Member member; // ì£¼ë¬¸ íšŒì›

    @OneToMany(mappedBy = "order", cascade = CascadeType.ALL)
    private List<OrderItem> orderItems = new ArrayList<OrderItem>();

    @OneToOne(cascade = CascadeType.ALL, fetch = FetchType.LAZY)
    @JoinColumn(name = "DELIVERY_ID")
    private Delivery delivery; // ë°°ì†¡ì •ë³´

    private Date orderDate; // ì£¼ë¬¸ì‹œê°„

    @Enumerated(EnumType.STRING)
    private OrderStatus status; // ì£¼ë¬¸ìƒíƒœ

    //==ì—°ê´€ê´€ê³„ ë©”ì†Œë“œ==//
    public void setMember(Member member) {
        this.member = member;
        member.getOrders().add(this);
    }

    public void addOrderItem(OrderItem orderItem) {
        orderItems.add(orderItem);
        orderItem.setOrder(this);
    }

    public void setDelivery(Delivery delivery) {
        this.delivery = delivery;
        delivery.setOrder(this);
    }

    // Getter, Setter
    ...
}
```

- ì£¼ë¬¸ìƒí’ˆ ì—”í‹°í‹°
```java
@Entity
@Table(name = "ORDER_ITEM")
public class OrderItem {

    @Id @GeneratedValue
    @Column(name = "ORDER_ITEM_ID")
    private Long id;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "ITEM_ID")
    private Item item; // ì£¼ë¬¸ ìƒí’ˆ

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "ORDER_ID")
    private Order order; // ì£¼ë¬¸

    private int orderPrice; // ì£¼ë¬¸ ê°€ê²©
    private int count; // ì£¼ë¬¸ ìˆ˜ëŸ‰

    // Getter, Setter
    ...
}
```

- ìƒí’ˆ ì—”í‹°í‹°
```java
@Entity
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
@DiscriminatorColumn(name = "DTYPE")
public abstract class Item {

    @Id @GeneratedValue
    @Column(name = "ITEM_ID")
    private Long id;

    private String name; // ì´ë¦„
    private int price; // ê°€ê²©
    private int stockQuantity; // ì¬ê³ ìˆ˜ëŸ‰

    @ManyToMany(mappedBy = "items")
    private List<Category> categories = new ArrayList<Category>();
    
    // Getter, Setter
    ...
}
```

- ìƒí’ˆ - ë„ì„œ ì—”í‹°í‹°
```java
@Entity
@DiscriminatorValue("B")
public class Book extends Item {

    private String author;
    private String isbn;
    
    // Getter, Setter
    ...
}
```

- ìƒí’ˆ - ìŒë°˜ ì—”í‹°í‹°
```java
@Entity
@DiscriminatorValue("A")
public class Album extends Item {

    private String artist;
    private String etc;
    
    // Getter, Setter
    ...
}
```

- ìƒí’ˆ - ì˜í™” ì—”í‹°í‹°
```java
@Entity
@DiscriminatorValue("M")
public class Movie extends Item {

    private String director;
    private String actor;
    
    // Getter, Setter
    ...
}
```

- ë°°ì†¡ ì—”í‹°í‹°
```java
@Entity
public class Delivery {

    @Id @GeneratedValue
    @Column(name = "DELIVERY_ID")
    private Long id;

    @OneToOne(mappedBy = "delivery")
    private Order order;

    @Embedded
    private Address address;

    @Enumerated(EnumType.STRING)
    private DeliveryStatus status; // ENUM [READY(ì¤€ë¹„), COMP(ë°°ì†¡)]
    
    // Getter, Setter
    ...
}
```

- ì¹´í…Œê³ ë¦¬ ì—”í‹°í‹°
```java
@Entity
public class Category {

    @Id @GeneratedValue
    @Column(name = "CATEGORY_ID")
    private Long id;

    private String name;

    @ManyToMany
    @JoinTable(name = "CATEGORY_ITEM",
            joinColumns = @JoinColumn(name = "CATEGORY_ID"),
            inverseJoinColumns = @JoinColumn(name = "ITEM_ID"))
    private List<Item> items = new ArrayList<Item>();

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "PARENT_ID")
    private Category parent;

    @OneToMany(mappedBy = "parent")
    private List<Category> child = new ArrayList<Category>();

    //==ì—°ê´€ê´€ê³„ ë©”ì„œë“œ==//
    public void addChildCategory(Category child) {
        this.child.add(child);
        child.setParent(this);
    }
    
    // Getter, Setter
    ...
}
```

- ì£¼ì†Œ ê°’ íƒ€ì…
```java
@Embeddable
public class Address {

    private String city;
    private String street;
    private String zipcode;
    
    // Getter, Setter
    ...
}
```

**â• ì°¸ê³  : ê¸°ë³¸ í‚¤ ì´ë¦„ê³¼ ì—”í‹°í‹° ì‹ë³„ì ì´ë¦„**
í…Œì´ë¸”ì˜ ê¸°ë³¸ í‚¤ ì»¬ëŸ¼ ì´ë¦„ì€ í•´ë‹¹ í…Œì´ë¸” ì´ë¦„ì„ í¬í•¨í•˜ë„ë¡ í•˜ì. ì—”í‹°í‹°ëŠ” ì—°ê´€ëœ ì—”í‹°í‹°ë¥¼ ì°¸ì¡°í•  ë•Œ íƒ€ì…ì´ ìˆìœ¼ë¯€ë¡œ ì—”í‹°í‹°ì˜ ì‹ë³„ìë¥¼ ë‹¨ìˆœíˆ idë¡œ ì§€ì–´ë„ ì–´ë–¤ ì—”í‹°í‹°ë¥¼ ì°¸ì¡°í•˜ëŠ”ì§€ ì‰½ê²Œ ì•Œ ìˆ˜ ìˆì§€ë§Œ, í…Œì´ë¸”ì˜ ê¸°ë³¸ í‚¤ë‚˜ ì™¸ë˜ í‚¤ëŠ” ë‹¨ìˆœíˆ ê°’ë§Œ ì €ì¥í•˜ì§€ ì–´ë–¤ í…Œì´ë¸”ê³¼ ê´€ê³„ê°€ ìˆëŠ”ì§€ ì™¸ë˜ í‚¤ ì œì•½ì¡°ê±´ì„ ì°¸ê³ í•˜ì§€ ì•Šìœ¼ë©´ ì•Œ ìˆ˜ ì—†ë‹¤!
