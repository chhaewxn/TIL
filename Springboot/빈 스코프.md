## ë¹ˆ ìŠ¤ì½”í”„ë€?

- ìŠ¤í”„ë§ ë¹ˆ(Bean): ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì—ì„œ ê´€ë¦¬í•˜ëŠ” ìë°” ê°ì²´ 
- ìŠ¤ì½”í”„ : ì¡´ì¬í•  ìˆ˜ ìˆëŠ” ë²”ìœ„

ğŸ”» ìŠ¤í”„ë§ì€ ë‹¤ìŒê³¼ ê°™ì€ ë‹¤ì–‘í•œ ìŠ¤ì½”í”„ë¥¼ ì§€ì›í•œë‹¤.

- ì‹±ê¸€í†¤ : ê¸°ë³¸ ìŠ¤ì½”í”„, ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì˜ ì‹œì‘ê³¼ ì¢…ë£Œê¹Œì§€ ìœ ì§€ë˜ëŠ” ê°€ì¥ ë„“ì€ ë²”ìœ„ì˜ ìŠ¤ì½”í”„ì´ë‹¤.
- í”„ë¡œí† íƒ€ì… : ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” í”„ë¡œí† íƒ€ì… ë¹ˆì˜ ìƒì„±ê³¼ ì˜ì¡´ê´€ê³„ ì£¼ì…ê¹Œì§€ë§Œ ê´€ì—¬í•˜ê³  ë”ëŠ” ê´€ë¦¬í•˜ì§€ ì•ŠëŠ” ë§¤ìš° ì§§ì€ ë²”ìœ„ì˜ ìŠ¤ì½”í”„ì´ë‹¤.
- ì›¹ ê´€ë ¨ ìŠ¤ì½”í”„
	- request : ì›¹ ìš”ì²­ì´ ë“¤ì–´ì˜¤ê³  ë‚˜ê°ˆë•Œ ê¹Œì§€ ìœ ì§€ë˜ëŠ” ìŠ¤ì½”í”„ì´ë‹¤.
		- session : ì›¹ ì„¸ì…˜ì´ ìƒì„±ë˜ê³  ì¢…ë£Œë  ë•Œ ê¹Œì§€ ìœ ì§€ë˜ëŠ” ìŠ¤ì½”í”„ì´ë‹¤.
		- application : ì›¹ì˜ ì„œë¸”ë¦¿ ì»¨í…ìŠ¤ì™€ ê°™ì€ ë²”ìœ„ë¡œ ìœ ì§€ë˜ëŠ” ìŠ¤ì½”í”„ì´ë‹¤.

### ë¹ˆ ìŠ¤ì½”í”„ ì‚¬ìš© ë°©ë²•
ğŸ”» ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ìë™ ë“±ë¡
```java
@Scope("prototype")
@Component
public class PrototypeBean {}
```

ğŸ”» ìˆ˜ë™ ë“±ë¡
```java
@Scope("prototype")
@Bean
PrototypeBean prototypeBean(){
	return new PrototypeBean();
}
```

### í”„ë¡œí† íƒ€ì… ìŠ¤ì½”í”„
ê¸°ì¡´ì˜ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë“±ë¡ëœ ìŠ¤í”„ë§ ë¹ˆì€ ì‹±ê¸€í†¤ ìŠ¤ì½”í”„ë¼ê³  ë§ì„ í•˜ì˜€ìœ¼ë©°, ê·¸ë ‡ê¸°ì— ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” í•­ìƒ ê°™ì€ ì¸ìŠ¤í„´ìŠ¤ì˜ ìŠ¤í”„ë§ ë¹ˆì„ ë°˜í™˜í•œë‹¤. 

ğŸ”» ì‹±ê¸€í†¤ ìŠ¤ì½”í”„ ì˜ ìŠ¤í”„ë§ ë¹ˆ ìš”ì²­

1. í´ë¼ì´ì–¸íŠ¸ì—ì„œ í”„ë¡œí† íƒ€ì… ìŠ¤ì½”í”„ì˜ ìŠ¤í”„ë§ ë¹ˆì„ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ìš”ì²­
2. ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ì´ ì‹œì ì—ì„œ í”„ë¡œí† íƒ€ì… ë¹ˆì„ ìƒì„±í•˜ê³ , ì˜ì¡´ê´€ê³„ ì£¼ì…(DI)
3.ìƒì„±í•œ í”„ë¡œí† íƒ€ì… ë¹ˆì„ í´ë¼ì´ì–¸íŠ¸ì— ë°˜í™˜

ì—¬ê¸°ì„œ í”„ë¡œí† íƒ€ì…ì€ ì‹±ê¸€í†¤ íƒ€ì…ì˜ ìŠ¤í”¼ë§ ë¹ˆê³¼ëŠ” ë‹¤ë¥´ê²Œ ë¹ˆ ìƒì„±, ì˜ì¡´ê´€ê³„ ì£¼ì…, ì´ˆê¸°í™”ê¹Œì§€ë§Œ ì§„í–‰í•œë‹¤. ê·¸ë ‡ê¸°ì— ê·¸ ì´í›„ ìŠ¤í”„ë§ ë¹ˆì„ í´ë¼ì´ì–¸íŠ¸ì— ë°˜í™˜í•œ ì´í›„ë¡œëŠ” ê´€ë¦¬í•˜ì§€ ì•Šê¸°ì— ì†Œë©¸ ë©”ì„œë“œê°™ì€ê²ƒì€ ëª¨ë‘ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ìì²´ì ìœ¼ë¡œ ê´€ë¦¬í•´ì•¼ í•œë‹¤. 

#### ì‹±ê¸€í†° ìŠ¤ì½”í”„ ë¹ˆ í…ŒìŠ¤íŠ¸
```java
package hello.core.scope;

import org.junit.jupiter.api.Test;
import org.springframework.context.ApplicationContext;
import org.springframework.context.ConfigurableApplicationContext;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;
import org.springframework.context.annotation.Scope;

import javax.annotation.PostConstruct;
import javax.annotation.PreDestroy;

import static org.assertj.core.api.Assertions.assertThat;

public class SingletonTest {

    @Test
    public void singletonBeanFind() {
        ConfigurableApplicationContext ac = new AnnotationConfigApplicationContext(SingletonBean.class);
        SingletonBean singletonBean1 = ac.getBean(SingletonBean.class);
        SingletonBean singletonBean2 = ac.getBean(SingletonBean.class);
        System.out.println("singletonBean1 = " + singletonBean1);
        System.out.println("singletonBean2 = " + singletonBean2);

        assertThat(singletonBean1).isSameAs(singletonBean2);

        ac.close();
    }

    @Scope("singleton")
    static class SingletonBean{
        @PostConstruct
        public void init() {
            System.out.println("SingletonBean.init");
        }

        @PreDestroy
        public void destroy() {
            System.out.println("SingletonBean.destroy");
        }
    }
}
```

ì‹±ê¸€í†¤ ìŠ¤ì½”í”„ì˜ ìŠ¤í”„ë§ ë¹ˆì€ ì—¬ëŸ¬ë²ˆ í˜¸ì¶œí•´ë„ ëª¨ë‘ ê°™ì€ ì¸ìŠ¤í„´ìŠ¤ ì°¸ì¡° ì£¼ì†Œê°’ì„ ê°€ì§„ë‹¤. ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ì¢…ë£Œì‹œ ì†Œë©¸ ë©”ì„œë“œë„ ìë™ìœ¼ë¡œ ì‹¤í–‰ëœë‹¤. 

- ë¹ˆ ì´ˆê¸°í™” ë©”ì„œë“œ ì‹¤í–‰í•˜ê³ ,
- ê°™ì€ ì¸ìŠ¤í„´ìŠ¤ì˜ ë¹ˆì„ ì¡°íšŒí•˜ê³ 
- ì¢…ë£Œ ë©”ì„œë“œê¹Œì§€ ì •ìƒ í˜¸ì¶œ ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

#### í”„ë¡œí† íƒ€ì… ìŠ¤ì½”í”„ ë¹ˆ í…ŒìŠ¤íŠ¸
```java
package hello.core.scope;

import org.junit.jupiter.api.Test;
import org.springframework.context.ConfigurableApplicationContext;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;
import org.springframework.context.annotation.Scope;

import javax.annotation.PostConstruct;
import javax.annotation.PreDestroy;

import static org.assertj.core.api.Assertions.assertThat;

public class PrototypeTest {

    @Test
    public void prototypeBeanFind() {
        ConfigurableApplicationContext ac = new AnnotationConfigApplicationContext(PrototypeBean.class);
        PrototypeBean prototypeBean1 = ac.getBean(PrototypeBean.class);
        PrototypeBean prototypeBean2 = ac.getBean(PrototypeBean.class);
        System.out.println("prototypeBean1 = " + prototypeBean1);
        System.out.println("prototypeBean2 = " + prototypeBean2);

        assertThat(prototypeBean1).isNotSameAs(prototypeBean2);

        ac.close();
    }


    @Scope("prototype")
    static class PrototypeBean{
        @PostConstruct
        public void init() {
            System.out.println("PrototypeBean.init");
        }

        @PreDestroy
        public void destroy() {
            System.out.println("PrototypeBean.destroy");
        }
    }
}
```
- ì‹±ê¸€í†¤ ë¹ˆì€ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„± ì‹œì ì— ì´ˆê¸°í™” ë©”ì„œë“œê°€ ì‹¤í–‰ ë˜ì§€ë§Œ, í”„ë¡œí† íƒ€ì… ìŠ¤ì½”í”„ì˜ ë¹ˆì€ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì—ì„œ ë¹ˆì„ ì¡°íšŒí•  ë•Œ ìƒì„±ë˜ê³ , ì´ˆê¸°í™” ë©”ì„œë“œë„ ì‹¤í–‰ëœë‹¤.
- í”„ë¡œí† íƒ€ì… ë¹ˆì„ 2ë²ˆ ì¡°íšŒí–ˆìœ¼ë¯€ë¡œ ì™„ì „íˆ ë‹¤ë¥¸ ìŠ¤í”„ë§ ë¹ˆì´ ìƒì„±ë˜ê³ , ì´ˆê¸°í™”ë„ 2ë²ˆ ì‹¤í–‰ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
- ì‹±ê¸€í†¤ ë¹ˆì€ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ê´€ë¦¬í•˜ê¸° ë•Œë¬¸ì— ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ì¢…ë£Œë  ë•Œ ë¹ˆì˜ ì¢…ë£Œ ë©”ì„œë“œê°€ ì‹¤í–‰ë˜ì§€ë§Œ, í”„ë¡œí† íƒ€ì… ë¹ˆì€ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ìƒì„±ê³¼ ì˜ì¡´ê´€ê³„ ì£¼ì… ê·¸ë¦¬ê³  ì´ˆê¸°í™” ê¹Œì§€ë§Œ ê´€ì—¬í•˜ê³ , ë”ëŠ” ê´€ë¦¬í•˜ì§€ ì•ŠëŠ”ë‹¤. ë”°ë¼ì„œ í”„ë¡œí† íƒ€ì… ë¹ˆì€ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ì¢…ë£Œë  ë•Œ @PreDestoryê°™ì€ ì¢…ë£Œ ë©”ì„œë“œê°€ ì „í˜€ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤.

### ì •ë¦¬
- ì‹±ê¸€í†¤ì€ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì™€ ìƒëª…ì£¼ê¸°ë¥¼ ê°™ì´í•˜ì§€ë§Œ, í”„ë¡œí† íƒ€ì… ìŠ¤í”„ë§ ë¹ˆì€ ìƒëª…ì£¼ê¸°ë¥¼ ë‹¬ë¦¬í•œë‹¤.
- ì‹±ê¸€í†¤ ìŠ¤í”„ë§ ë¹ˆì€ ë§¤ë²ˆ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì—ì„œ ë™ì¼í•œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°˜í™˜í•˜ì§€ë§Œ, í”„ë¡œí† íƒ€ì… ìŠ¤í”„ë§ ë¹ˆì€ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ìš”ì²­í•  ë•Œë§ˆë‹¤ ìƒˆë¡œìš´ ìŠ¤í”„ë§ ë¹ˆì„ ìƒì„±í›„ ì˜ì¡´ê´€ê³„ê¹Œì§€ ì£¼ì…ë° ì´ˆê¸°í™” ì§„í–‰í›„ ë°˜í™˜í•œë‹¤. 
- í”„ë¡œí† íƒ€ì… ìŠ¤í”„ë§ ë¹ˆì€ ì†Œë©¸ ë©”ì„œë“œê°€ í˜¸ì¶œë˜ì§€ ì•ŠëŠ”ë‹¤. 
- í´ë¼ì´ì–¸íŠ¸ê°€ í”„ë¡œí† íƒ€ì… ìŠ¤í”„ë§ ë¹ˆì€ ì§ì ‘ ê´€ë¦¬í•´ì•¼ í•œë‹¤. (ì†Œë©¸ ë©”ì„œë“œë„ ì§ì ‘ í˜¸ì¶œí•´ì•¼ í•œë‹¤. )

## í”„ë¡œí† íƒ€ì… ìŠ¤ì½”í”„ - ì‹±ê¸€í†¤ ë¹ˆê³¼ í•¨ê»˜ ì‚¬ìš©ì‹œ ë¬¸ì œì 

### ë¬¸ì œ ë°œìƒ ì¼€ì´ìŠ¤
ğŸ”» ì‹±ê¸€í†¤ ìŠ¤í”„ë§ ë¹ˆ ë‚´ë¶€ì— ì˜ì¡´ê´€ê³„ë¡œ ì£¼ì…ë˜ëŠ” ìŠ¤í”„ë§ ë¹ˆì´ í”„ë¡œí† íƒ€ì…ì¸ ê²½ìš°
```java
package hello.core.scope;

import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;
import org.springframework.context.annotation.Scope;

import javax.annotation.PostConstruct;
import javax.annotation.PreDestroy;

import static org.assertj.core.api.Assertions.assertThat;

public class SingletonWithPrototypeTest1 {

    @Test
    void singletonClientUserPrototype() {
        AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(ClientBean.class, PrototypeBean.class);

        ClientBean clientBean1 = ac.getBean(ClientBean.class);
        int count1 = clientBean1.logic();
        assertThat(count1).isEqualTo(1);

        ClientBean clientBean2 = ac.getBean(ClientBean.class);
        int count2 = clientBean2.logic();
        assertThat(count2).isEqualTo(2);



    }

    static class ClientBean{
        private final PrototypeBean prototypeBean;

        @Autowired
        public ClientBean(PrototypeBean prototypeBean) {
            this.prototypeBean = prototypeBean;
        }

        public int logic() {
            prototypeBean.addCount();
            int count = prototypeBean.getCount();
            return count;
        }

    }

    @Scope("prototype")
    static class PrototypeBean{
        private int count = 0 ;

        public void addCount() {
            count ++;
        }

        public int getCount() {
            return count;
        }

        @PostConstruct
        public void init() {
            System.out.println("PrototypeBean.init");
        }

        @PreDestroy
        public void destroy() {
            System.out.println("PrototypeBean.destroy");
        }

    }

}
```

PrototypeBeanì€ í”„ë¡œí† íƒ€ì… ìŠ¤ì½”í”„ì§€ë§Œ clientBeanì€ ì‹±ê¸€í†¤ ìŠ¤ì½”í”„ì´ê¸° ë•Œë¬¸ì—, ì‹±ê¸€í†¤ ë¹ˆì—ì„œ í”„ë¡œí† íƒ€ì… ë¹ˆì„ ì‚¬ìš©í•œë‹¤. ì‹±ê¸€í†¤ ë¹ˆì˜ ìŠ¤ì½”í”„ëŠ” ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì™€ ê°™ì€ë°, í”„ë¡œí† íƒ€ì… ìŠ¤ì½”í”„ì˜ ìŠ¤í”„ë§ ë¹ˆì´ ìƒˆë¡œ ìƒì„±ë˜ê¸°ëŠ” í–ˆì§€ë§Œ ì‹±ê¸€í†¤ ë¹ˆê³¼ í•¨ê»˜ ì‚¬ìš©ë˜ê¸° ë•Œë¬¸ì— ê³„ì† ìœ ì§€ëœë‹¤. 

ê·¸ë˜ì„œ ë¹ˆì„ 2íšŒ ìš”ì²­í•˜ì§€ë§Œ ë™ì¼í•œ í”„ë¡œí† íƒ€ì… ë¹ˆì„ ì‚¬ìš©í•˜ê²Œë˜ì–´ countëŠ” 1ì´ ì•„ë‹Œ 2ê°€ëœë‹¤. í”„ë¡œí† íƒ€ì… ë¹ˆë§Œ í´ë¼ì´ì–¸íŠ¸ê°€ ì§ì ‘ ì‚¬ìš©í•˜ëŠ”ê²½ìš°ë¼ë©´ ìƒê´€ì—†ì§€ë§Œ ì‹±ê¸€í†¤ ë¹ˆê³¼ í•¨ê»˜ ì‚¬ìš©í•˜ë©´ì„œ í”„ë¡œí† íƒ€ì… ë¹ˆì´ ìê¸°ì˜ ìŠ¤ì½”í”„ë¥¼ ì§€í‚¤ê³  ë§¤ë²ˆ ìƒˆë¡­ê²Œ ìƒì„±í•˜ê¸° ìœ„í•´ì„œëŠ” ì–´ë–»ê²Œ í•´ì•¼í• ê¹Œ? 


## í”„ë¡œí† íƒ€ì… ìŠ¤ì½”í”„ - ì‹±ê¸€í†¤ ë¹ˆê³¼ í•¨ê»˜ ì‚¬ìš©ì‹œ Providerë¡œ ë¬¸ì œ í•´ê²°

### ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ìš”ì²­
```java
static class ClientBean{
		@Autowired
    private ApplicationContext ac;

    public int logic() {
				PrototypeBean prototypeBean = ac.getBean(PrototypeBean.class);
        prototypeBean.addCount();
        int count = prototypeBean.getCount();
        return count;
    }

}
```

- ë§¤ë²ˆ í”„ë¡œí† íƒ€ì… ë¹ˆ(PrototypeBean)ì„ ìƒˆë¡œ ìƒì„±í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
- ì´ë ‡ê²Œ ì˜ì¡´ê´€ê³„ë¥¼ ì™¸ë¶€ì—ì„œ ì£¼ì…(DI)ë°›ëŠ” ê²ƒì´ ì•„ë‹Œ ì§ì ‘ í•„ìš”í•œ ì˜ì¡´ê´€ê³„ë¥¼ ì°¾ëŠ” ê²ƒì„ Dependency Lookup(DL) ì˜ì¡´ê´€ê³„ ì¡°íšŒ(íƒìƒ‰) ì´ë¼ í•œë‹¤. 
- í•˜ì§€ë§Œ, ì´ë ‡ê²Œ ìŠ¤í”„ë§ ì• í”Œë¦¬ì¼€ì´ì…˜ ì»¨í…ìŠ¤íŠ¸ ì „ì²´ë¥¼ ì£¼ì…ë°›ê²Œ ë˜ë©´ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì™€ ì¢…ì†ì„±ì´ ìƒê¸°ê³  í…ŒìŠ¤íŠ¸ë„ ì–´ë ¤ì›Œì§„ë‹¤. 

### ObjectFactory, ObjectProvider
- ObjectFactory: ì§€ì •í•œ ë¹ˆì„ ì»¨í…Œì´ë„ˆì—ì„œ ëŒ€ì‹  ì°¾ì•„ì£¼ëŠ” DL ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•´ì¤€ë‹¤. ì•„ì£¼ ë‹¨ìˆœí•˜ê²Œ getObject í•˜ë‚˜ë§Œ ì œê³µí•˜ëŠ” FunctionalInterfaceì´ê³ , ë³„ë„ì˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ë„ í•„ìš” ì—†ë‹¤. ê·¸ë¦¬ê³  ìŠ¤í”„ë§ì— ì˜ì¡´í•œë‹¤. 

- ObjectProvider : ObjectFactoryì— í¸ì˜ê¸°ëŠ¥ë“¤(Optional, Stream...)ì¶”ê°€í•´ì„œ ë§Œë“¤ì–´ì§„ ê°ì²´
ë³„ë„ì˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” í•„ìš” ì—†ê³  ìŠ¤í”„ë§ì— ì˜ì¡´í•œë‹¤. 

ì ìš© ì½”ë“œ
```java
static class ClientBean{
    @Autowired
    private ObjectProvider<PrototypeBean> prototypeBeanProvider;

    public int logic() {
        PrototypeBean prototypeBean = prototypeBeanProvider.getObject();
        prototypeBean.addCount();
        int count = prototypeBean.getCount();
        return count;
    }
}
```
- ìœ„ì—ì„œ ì‹¤í–‰í•œ ac.getBean(PrototypeBean.class) ì™€ ë™ì¼í•˜ê²Œ ë§¤ë²ˆ ìƒˆë¡œìš´ í”„ë¡œí† íƒ€ì… ë¹ˆì´ ìƒì„±ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

- ObjectProviderì˜ getObject()ë¥¼ í˜¸ì¶œí•˜ë©´ ë‚´ë¶€ì—ì„œëŠ” ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ í†µí•´ í•´ë‹¹ ë¹ˆì„ ì°¾ì•„ì„œ ë°˜í™˜í•œë‹¤.(DL)

- ìŠ¤í”„ë§ì— ì¢…ì†ì ì¸ê²ƒì€ ë™ì¼í•˜ì§€ë§Œ, ê¸°ëŠ¥ì´ ë‹¨ìˆœí•´ì„œ ë‹¨ìœ„í…ŒìŠ¤íŠ¸ ë° Mock ì„ ì´ìš©í•œ í…ŒìŠ¤íŠ¸ ë”ë¸”ì„ ì¤€ë¹„í•˜ê¸° ì‰½ë‹¤. 

### JSR-330 Provider
ì´ëŸ° ìŠ¤í”„ë§ì˜ ì˜ì¡´ì„±ì´ ë§ˆìŒì— ë“¤ì§€ ì•Šìœ¼ë©´ javax.inject.Provider íŒ¨í‚¤ì§€ì˜ JSR-330 ìë°” í‘œì¤€ì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì´ ìˆë‹¤. ì´ ë°©ë²•ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” javax.inject:javax.inject:1 ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì¶”ê°€

ğŸ”» build.gradleì— ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¶”ê°€
 ```java
...

dependencies {
    implementation 'org.springframework.boot:spring-boot-starter'
    implementation 'javax.inject:javax.inject:1'

		...
}
```

ğŸ”» í…ŒìŠ¤íŠ¸ ì½”ë“œ ë³€ê²½
```java
import javax.inject.Provider;

...
static class ClientBean{
    @Autowired
    private Provider<PrototypeBean> prototypeBeanProvider;

    public int logic() {
        PrototypeBean prototypeBean = prototypeBeanProvider.get();
        prototypeBean.addCount();
        int count = prototypeBean.getCount();
        return count;
    }
}
```

- ì˜ë„í•œëŒ€ë¡œ ë§¤ë²ˆ ìƒˆë¡œìš´ í”„ë¡œí† íƒ€ì… ë¹ˆì´ ìƒì„±ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
- ObjectProviderì˜ getObjectëŒ€ì‹  getë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ Dependency Lookup(DL)í•œë‹¤. 
- ìë°” í‘œì¤€ì´ê³ , ê¸°ëŠ¥ì´ ë‹¨ìˆœí•˜ê¸°ì— ë‹¨ìœ„í…ŒìŠ¤íŠ¸ë„ ê°€ëŠ¥í•˜ê³  í…ŒìŠ¤íŠ¸ ë”ë¸”ë„ ì‰½ë‹¤. 
- ìŠ¤í”„ë§ì´ ì•„ë‹Œ ë‹¤ë¥¸ ì»¨í…Œì´ë„ˆì—ì„œë„ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤.
- ë³„ë„ì˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ í•„ìš”í•˜ë‹¤. 

## ì›¹ ìŠ¤ì½”í”„
ì›¹ í™˜ê²½ì—ì„œë§Œ ë™ì‘í•˜ëŠ” ìŠ¤ì½”í”„ë¡œ ìŠ¤í”„ë§ì´ í•´ë‹¹ ìŠ¤ì½”í”„ì˜ ì¢…ë£Œì‹œì ê¹Œì§€ ê´€ë¦¬í•˜ë©°, ì¢…ë£Œ ë©”ì„œë“œë„ í˜¸ì¶œëœë‹¤.

### ì¢…ë¥˜
- request: HTTP ìš”ì²­ì´ ë“¤ì–´ì˜¤ê³  ë‚˜ê°ˆë•Œê¹Œì§€ ìœ ì§€ë˜ëŠ” ìŠ¤ì½”í”„ë¡œ ê°ê°ì˜ ìš”ì²­ë§ˆë‹¤ ë³„ë„ì˜ ë¹ˆ ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„±ë° ê´€ë¦¬ëœë‹¤.
- session: HTTP Sessionê³¼ ë™ì¼í•œ ìƒëª…ì£¼ê¸°ë¥¼ ê°€ì§„ë‹¤.
- application: ì„œë¸”ë¦¿ ì»¨í…ìŠ¤íŠ¸(ServletContext)ì™€ ë™ì¼í•œ ìƒëª…ì£¼ê¸°ë¥¼ ê°€ì§€ëŠ” ìŠ¤ì½”í”„
- websocket: ì›¹ì†Œì¼“ê³¼ ë™ì¼í•œ ìƒëª…ì£¼ê¸°ë¥¼ ê°€ì§€ëŠ” ìŠ¤ì½”í”„

#### request ìŠ¤ì½”í”„ ì˜ˆì œ ë§Œë“¤ê¸°
**1. build.gradleì— web í™˜ê²½ ì¶”ê°€**
```java
//web ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¶”ê°€
implementation 'org.springframework.boot:spring-boot-starter-web'
```
ë§Œì•½ ì‹¤í–‰í–ˆì„ë•Œ ê¸°ë³¸ í¬íŠ¸ì¸ 8080 í¬íŠ¸ê°€ ì‚¬ìš©ì¤‘ì´ë¼ë©´ main/resources/application.propertiesì—ì„œ ë‹¤ìŒ ë‚´ìš©ì„ ì¶”ê°€í•´ í¬íŠ¸ë¥¼ ë³€ê²½í•˜ì.
```java
server.port=9000
```

**2. ì½”ë“œ ì‘ì„±**
- MyLogger
- LogDemoController
- LogDemoService

**3. ì‹¤í–‰**
: ì´ì œ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ CoreApplicationì„ ì‹¤í–‰ì‹œì¼œë³´ë©´, ì˜ˆìƒê³¼ ë‹¤ë¥´ê²Œ ì—ëŸ¬ê°€ ë°œìƒí•  ê²ƒì´ë‹¤. 

ìŠ¤í”„ë§ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ëŠ” ì‹œì ì— ì‹±ê¸€í†¤ ë¹ˆì€ ìƒì„±í•´ì„œ ì£¼ì…ì´ ê°€ëŠ¥í•˜ì§€ë§Œ, request ìŠ¤ì½”í”„ ë¹ˆì€ ì•„ì§ ìƒì„±ë˜ì§€ ì•Šê³  ì‹¤ì œ ê³ ê°ì˜ ìš”ì²­ì´ ì™€ì•¼ ìƒì„±í• ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤.

ë‹¤ì‹œë§í•´, í•´ë‹¹ í”„ë¡œì íŠ¸ê°€ êµ¬ë™ë ë•Œ ìŠ¤í”„ë§ ë¹ˆë“¤ì´ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì´ ë˜ë©° ë“±ë¡ ë° ì˜ì¡´ê´€ê³„ ì£¼ì…ì´ ë˜ëŠ”ë°, ì—¬ê¸°ì„œ ì›¹ìŠ¤ì½”í”„ì¸ MyLogger ë¹ˆì˜ ê²½ìš° HTTP request ìš”ì²­ì´ ì˜¬ë•Œ ìƒì„±ë˜ëŠ” ë¹ˆì´ê¸° ë•Œë¬¸ì— ìŠ¤í”„ë§ êµ¬ë™ë‹¨ê³„ì—ì„œëŠ” ì•„ì§ ìƒì„±ì„ í•  ìˆ˜ ì—†ë‹¤. ê·¸ë ‡ê¸°ì— í•´ë‹¹ ì—ëŸ¬ê°€ ë°œìƒí•˜ëŠ” ê²ƒì´ë‹¤. 

ì •ë¦¬í•˜ë©´, ìŠ¤í”„ë§ êµ¬ë™ì‹œ MyLogger ìŠ¤í”„ë§ ë¹ˆì„ ë“±ë¡ì„ ìš”êµ¬í•˜ëŠ”ë° í•´ë‹¹ ë¹ˆì€ ìì‹ ì´ ìƒì„±ë˜ì•¼ í•  ìŠ¤ì½”í”„ ë²”ìœ„ì— í•´ë‹¹ë˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤.

ê·¸ëŸ¼ í•´ë‹¹ ìŠ¤í”„ë§ ë¹ˆì€ ìŠ¤í”„ë§ êµ¬ë™ì‹œì ì´ì•„ë‹Œ ì‚¬ìš©ìì˜ HTTP request ìš”ì²­ ì‹œì ì— ìƒì„±ë  ìˆ˜ ìˆë‹¤ëŠ” ë§ì¸ë°, ì´ë¥¼ í•´ê²°í•˜ê¸°ìœ„í•œ ë°©ë²•ë“¤ì— ëŒ€í•´ ì•Œì•„ë³´ì. 
